---
import Layout from '@layouts/Layout.astro';
import BlogCard from '@components/BlogCard.astro';
import { fetchAllPosts } from '@data/blog';

// Fetch the 3 most recent posts for the homepage
const allPosts = await fetchAllPosts();
const latestPosts = allPosts.slice(0, 3);

const pageTitle = 'Welcome to My Blog';
const pageDescription = 'Insights, tutorials, and stories about web development, technology, and design.';
---

<Layout title={pageTitle} description={pageDescription}>
    <main>
        {/* Hero Section */}
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">
                        Explore the world of <span class="text-gradient">Modern Development</span>
                    </h1>
                    <p class="hero-subtitle">
                        A curated collection of thoughts, tutorials, and deep dives into the technologies shaping the future of the web.
                    </p>
                    <div class="hero-actions">
                        <a href="/blog" class="btn-primary">Read the Blog</a>
                        <a href="#latest" class="btn-secondary">Latest Stories</a>
                    </div>
                </div>
            </div>
        </section>

        {/* Latest Posts Section */}
        <section id="latest" class="latest-posts">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Latest from the Blog</h2>
                    <p class="section-subtitle">Fresh insights delivered straight to your screen.</p>
                </div>

                {latestPosts.length > 0 ? (
                    <div class="posts-grid">
                        {latestPosts.map((post) => (
                            <BlogCard post={post} />
                        ))}
                    </div>
                ) : (
                    <div class="no-posts">
                        <p>Stay tuned! Amazing stories are on their way.</p>
                    </div>
                )}

                <div class="view-all">
                    <a href="/blog" class="view-all-link">
                        View all articles <span class="arrow">â†’</span>
                    </a>
                </div>
            </div>
        </section>

        {/* Featured Quote/Value Prop Section */}
        <section class="features">
            <div class="container">
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ðŸš€</div>
                        <h3 class="feature-title">Performance First</h3>
                        <p class="feature-text">Lightning fast pages optimized for SEO and user experience.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ðŸŽ¨</div>
                        <h3 class="feature-title">Clean Design</h3>
                        <p class="feature-text">Aesthetic and minimal interfaces that focus on readability.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ðŸ“š</div>
                        <h3 class="feature-title">Quality Content</h3>
                        <p class="feature-text">In-depth tutorials and articles backed by real-world experience.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
</Layout>

<style>
    .hero {
        padding: 8rem 0 6rem;
        background: var(--base-200);
        border-bottom: 1px solid var(--fallback-bc,oklch(var(--bc)/.1));
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1.5rem;
    }

    .hero-content {
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
    }

    .hero-title {
        font-size: clamp(2.5rem, 8vw, 4rem);
        font-weight: 800;
        line-height: 1.1;
        color: var(--base-content);
        margin-bottom: 1.5rem;
        letter-spacing: -0.025em;
        font-family: 'Inter', sans-serif;
    }

    .text-gradient {
        background: linear-gradient(to right, #6366f1, #a855f7);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .hero-subtitle {
        font-size: 1.25rem;
        color: var(--fallback-bc,oklch(var(--bc)/.7));
        line-height: 1.6;
        margin-bottom: 2.5rem;
        font-family: 'Lora', serif;
    }

    .hero-actions {
        display: flex;
        justify-content: center;
        gap: 1rem;
    }

    .btn-primary {
        padding: 0.875rem 2rem;
        background-color: var(--primary);
        color: var(--primary-content);
        border-radius: 9999px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.2s ease;
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    }

    .btn-primary:hover {
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }

    .btn-secondary {
        padding: 0.875rem 2rem;
        background-color: var(--base-100);
        color: var(--base-content);
        border: 1px solid var(--fallback-bc,oklch(var(--bc)/.2));
        border-radius: 9999px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.2s ease;
    }

    .btn-secondary:hover {
        background-color: var(--base-200);
    }

    .latest-posts {
        padding: 6rem 0;
        background-color: var(--base-100);
    }

    .section-header {
        text-align: center;
        margin-bottom: 4rem;
    }

    .section-title {
        font-size: 2.25rem;
        font-weight: 800;
        color: var(--base-content);
        margin-bottom: 0.75rem;
    }

    .section-subtitle {
        font-size: 1.125rem;
        color: var(--fallback-bc,oklch(var(--bc)/.6));
        font-family: 'Lora', serif;
    }

    .posts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 2.5rem;
        margin-bottom: 4rem;
    }

    .view-all {
        text-align: center;
    }

    .view-all-link {
        font-weight: 600;
        color: var(--primary);
        text-decoration: none;
        font-size: 1.125rem;
        transition: color 0.2s;
    }

    .view-all-link:hover {
        opacity: 0.8;
    }

    .arrow {
        display: inline-block;
        transition: transform 0.2s;
    }

    .view-all-link:hover .arrow {
        transform: translateX(4px);
    }

    .features {
        padding: 6rem 0;
        background-color: var(--base-200);
        border-top: 1px solid var(--fallback-bc,oklch(var(--bc)/.1));
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 3rem;
    }

    .feature-card {
        text-align: center;
    }

    .feature-icon {
        font-size: 2.5rem;
        margin-bottom: 1.5rem;
    }

    .feature-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--base-content);
        margin-bottom: 0.75rem;
    }

    .feature-text {
        color: var(--fallback-bc,oklch(var(--bc)/.6));
        line-height: 1.6;
    }

    @media (max-width: 768px) {
        .hero { padding: 6rem 0 4rem; }
        .hero-actions { flex-direction: column; }
        .features-grid { grid-template-columns: 1fr; gap: 2rem; }
        .posts-grid { grid-template-columns: 1fr; }
    }
</style>
